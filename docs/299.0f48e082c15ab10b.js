"use strict";(self.webpackChunkphoenix_app=self.webpackChunkphoenix_app||[]).push([[299],{1299:(_,a,s)=>{s.r(a),s.d(a,{TGraphTimePainter:()=>n});var h=s(1773),o=s(5611),m=s(2454),l=s(9608),f=s(554);class n extends m.tK{redraw(){void 0===this.step&&this.startDrawing()}decodeOptions(e){let t=new o.pc(e||"REPEAT");this.options||(this.options={}),Object.assign(this.options,{once:t.check("ONCE"),repeat:t.check("REPEAT"),first:t.check("FIRST")}),this.storeDrawOpt(e)}drawPrimitives(e){var r;e||(e=0,this._doing_primitives=!0);let t=null==(r=this.getObject())?void 0:r.fSteps.arr[this.step];return!t||e>=t.arr.length?(delete this._doing_primitives,Promise.resolve()):(0,f.ii)(this.getDom(),t.arr[e],t.opt[e]).then(i=>(i&&(i.$grtimeid=this.selfid),this.drawPrimitives(e+1)))}continueDrawing(){if(!this.options)return;let e=this.getObject();if(this.options.first)delete this.step;else if(this.wait_animation_frame){delete this.wait_animation_frame;let t=this.getPadPainter();if(!t)return void delete this.step;t.cleanPrimitives(r=>r.$grtimeid===this.selfid),this.drawPrimitives().then(()=>this.continueDrawing())}else if(this.running_timeout)clearTimeout(this.running_timeout),delete this.running_timeout,this.wait_animation_frame=!0,requestAnimationFrame(()=>this.continueDrawing());else{let t=e.fSleepTime;if((!t||t<100)&&(t=10),++this.step>e.fSteps.arr.length){if(!this.options.repeat)return void delete this.step;this.step=0,t=Math.max(5e3,5*t)}this.running_timeout=setTimeout(()=>this.continueDrawing(),t)}}startDrawing(){return this.step=0,this.drawPrimitives().then(()=>(this.continueDrawing(),this))}static draw(e,t,r){if(!t.fFrame)return console.error("Frame histogram not exists"),null;let i=new n(e,t);return i.getMainPainter()?(console.error("Cannot draw graph time on top of other histograms"),null):(i.decodeOptions(r),!t.fFrame.fTitle&&t.fTitle&&(t.fFrame.fTitle=t.fTitle),i.selfid="grtime"+h.internals.id_counter++,l.f.draw(e,t.fFrame,"AXIS").then(()=>(i.addToPadPrimitives(),i.startDrawing())))}}}}]);
//# sourceMappingURL=299.0f48e082c15ab10b.js.map