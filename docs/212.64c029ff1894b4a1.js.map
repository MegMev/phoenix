{"version":3,"file":"212.64c029ff1894b4a1.js","mappings":"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","names":["func","hist","nsave","fSave","length","use_middle","fXmin","fXmax","npx","Math","max","fNpx","npy","fNpy","iserr","isany","dx","dy","fYmax","fYmin","extra","j","i","x","y","z","evalPar","D","Number","isFinite","createHistogram","setBinContent","getBin","use_saved_points","fXaxis","fYaxis","round","k","fName","fTitle","fMinimum","fMaximum","fLineColor","fLineStyle","fLineWidth","fFillColor","fFillStyle","fMarkerColor","fMarkerStyle","fMarkerSize","kNoStats","BIT","fBits","dom","opt","proivdeEvalPar","createTF2Histogram","d","DrawOptions","empty","r","indexOf","getElementMainPainter","slice","TH2Painter","then","hpainter","tf2_typename","_typename","updateObject","obj","this","getHisto"],"sourceRoot":"webpack:///","sources":["../node_modules/jsroot/modules/draw/TF2.mjs"],"sourcesContent":["import { createHistogram, BIT } from '../core.mjs';\nimport { TH2Painter } from '../hist/TH2Painter.mjs';\nimport { proivdeEvalPar } from '../hist/TF1Painter.mjs';\nimport { getElementMainPainter } from '../base/ObjectPainter.mjs';\nimport { DrawOptions } from '../base/BasePainter.mjs';\n\n\n/** @summary Create histogram for TF2 drawing\n  * @private */\nfunction createTF2Histogram(func, hist = undefined) {\n   let nsave = func.fSave.length, use_middle = true;\n   if ((nsave > 6) && (nsave !== (func.fSave[nsave-2]+1)*(func.fSave[nsave-1]+1) + 6)) nsave = 0;\n\n   // check if exact min/max range is used or created histogram has to be extended\n   if ((nsave > 6) && (func.fXmin < func.fXmax) && (func.fSave[nsave-6] < func.fSave[nsave-5]) &&\n      ((func.fSave[nsave-5] - func.fSave[nsave-6]) / (func.fXmax - func.fXmin) > 0.99999)) use_middle = false;\n\n   let npx = Math.max(func.fNpx, 2),\n       npy = Math.max(func.fNpy, 2),\n       iserr = false, isany = false,\n       dx = (func.fXmax - func.fXmin) / (use_middle ? npx : (npx-1)),\n       dy = (func.fYmax - func.fYmin) / (use_middle ? npy : (npy-1)),\n       extra = use_middle ? 0.5 : 0;\n\n   for (let j = 0; j < npy; ++j)\n     for (let i = 0; (i < npx) && !iserr; ++i) {\n         let x = func.fXmin + (i + extra) * dx,\n             y = func.fYmin + (j + extra) * dy,\n             z = 0;\n\n         try {\n            z = func.evalPar(x, y);\n         } catch {\n            iserr = true;\n         }\n\n         if (!iserr && Number.isFinite(z)) {\n            if (!hist) hist = createHistogram(\"TH2F\", npx, npy);\n            isany = true;\n            hist.setBinContent(hist.getBin(i+1,j+1), z);\n         }\n      }\n\n   let use_saved_points = (iserr || !isany) && (nsave > 6);\n   if (!use_saved_points && !hist)\n      hist = createHistogram(\"TH2F\", npx, npy);\n\n   if (!iserr && isany) {\n      hist.fXaxis.fXmin = func.fXmin - (use_middle ? 0 : dx/2);\n      hist.fXaxis.fXmax = func.fXmax + (use_middle ? 0 : dx/2);\n\n      hist.fYaxis.fXmin = func.fYmin - (use_middle ? 0 : dy/2);\n      hist.fYaxis.fXmax = func.fYmax + (use_middle ? 0 : dy/2);\n   }\n\n   if (use_saved_points) {\n      npx = Math.round(func.fSave[nsave-2]);\n      npy = Math.round(func.fSave[nsave-1]);\n      dx = (func.fSave[nsave-5] - func.fSave[nsave-6]) / npx;\n      dy = (func.fSave[nsave-3] - func.fSave[nsave-4]) / npy;\n\n      if (!hist) hist = createHistogram(\"TH2F\", npx+1, npy+1);\n\n      hist.fXaxis.fXmin = func.fSave[nsave-6] - dx/2;\n      hist.fXaxis.fXmax = func.fSave[nsave-5] + dx/2;\n\n      hist.fYaxis.fXmin = func.fSave[nsave-4] - dy/2;\n      hist.fYaxis.fXmax = func.fSave[nsave-3] + dy/2;\n\n      for (let k = 0, j = 0; j <= npy; ++j)\n         for (let i = 0; i <= npx; ++i)\n            hist.setBinContent(hist.getBin(i+1,j+1), func.fSave[k++]);\n   }\n\n   hist.fName = \"Func\";\n   hist.fTitle = func.fTitle;\n   hist.fMinimum = func.fMinimum;\n   hist.fMaximum = func.fMaximum;\n   //fHistogram->SetContour(fContour.fN, levels);\n   hist.fLineColor = func.fLineColor;\n   hist.fLineStyle = func.fLineStyle;\n   hist.fLineWidth = func.fLineWidth;\n   hist.fFillColor = func.fFillColor;\n   hist.fFillStyle = func.fFillStyle;\n   hist.fMarkerColor = func.fMarkerColor;\n   hist.fMarkerStyle = func.fMarkerStyle;\n   hist.fMarkerSize = func.fMarkerSize;\n   const kNoStats = BIT(9);\n   hist.fBits |= kNoStats;\n\n   return hist;\n}\n\n/** @summary draw TF2 object\n  * @desc TF2 always drawn via temporary TH2 object,\n  * therefore there is no special painter class\n  * @private */\nfunction drawTF2(dom, func, opt) {\n\n   proivdeEvalPar(func);\n\n   let hist = createTF2Histogram(func);\n   if (!hist) return;\n\n   let d = new DrawOptions(opt);\n\n   if (d.empty())\n      opt = \"cont3\";\n   else if (d.opt === \"SAME\")\n      opt = \"cont2 same\";\n   else\n      opt = d.opt;\n\n   // workaround for old waves.C\n   if (opt == \"SAMECOLORZ\" || opt == \"SAMECOLOR\" || opt == \"SAMECOLZ\") opt = \"SAMECOL\";\n\n   if (opt.indexOf(\"SAME\") == 0)\n      if (!getElementMainPainter(dom))\n         opt = \"A_ADJUST_FRAME_\" + opt.slice(4);\n\n   return TH2Painter.draw(dom, hist, opt).then(hpainter => {\n\n      hpainter.tf2_typename = func._typename;\n\n      hpainter.updateObject = function(obj /*, opt*/) {\n         if (!obj || (this.tf2_typename != obj._typename)) return false;\n         proivdeEvalPar(obj);\n         createTF2Histogram(obj, this.getHisto());\n         return true;\n      };\n\n      return hpainter;\n   });\n}\n\nexport { drawTF2 };\n"]}