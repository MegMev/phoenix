"use strict";(self.webpackChunkphoenix_app=self.webpackChunkphoenix_app||[]).push([[680],{1156:(w,g,f)=>{f.r(g),f.d(g,{drawPolyLine3D:()=>O,drawPolyMarker3D:()=>E});var z=f(1515),D=f(1773),c=f(6772),M=f(1258);function p(i,e){let l=i.getFramePainter();if(!(null==l?void 0:l.mode3d)||!e)return null;if(l.toplevel)return l;let n=i.getMainPainter();return n?"function"==typeof n.drawExtras?n.drawExtras(e):null:(0,M.drawDummy3DGeom)(i)}function E(){let i=this.getObject(),e=p(this,i);if(!(e&&"object"==typeof e&&e.grx&&e.gry&&e.grz))return e;let l=1,a=0,r=i.fP;for(let t=0;t<r.length;t+=3)r[t]<e.scale_xmin||r[t]>e.scale_xmax||r[t+1]<e.scale_ymin||r[t+1]>e.scale_ymax||r[t+2]<e.scale_zmin||r[t+2]>e.scale_zmax||++a;D.settings.OptimizeDraw>0&&a>5e4&&(l=Math.floor(a/5e4),l<=2&&(l=2));let s=Math.floor(a/l),_=new c.B_(s,e.webgl,e.size_x3d/100),h=new Int32Array(s),y=0,v=0;for(let t=0;t<r.length;t+=3)r[t]<e.scale_xmin||r[t]>e.scale_xmax||r[t+1]<e.scale_ymin||r[t+1]>e.scale_ymax||r[t+2]<e.scale_zmin||r[t+2]>e.scale_zmax||l>1&&(y=(y+1)%l,0!==y)||(h[v++]=t,_.addPoint(e.grx(r[t]),e.gry(r[t+1]),e.grz(r[t+2])));return _.createPoints({color:this.getColor(i.fMarkerColor),style:i.fMarkerStyle}).then(t=>(t.tip_color=3===i.fMarkerColor?16711680:65280,t.tip_name=i.fName||"Poly3D",t.poly=i,t.painter=e,t.scale0=.7*_.scale,t.index=h,e.toplevel.add(t),t.tooltip=function(u){if(!Number.isInteger(u.index))return console.error(`intersect.index not provided, three.js version ${z.UZH}`),null;let o=Math.floor(u.index/this.nvertex);if(o<0||o>=this.index.length)return null;o=this.index[o];let x=this.painter,d=x.grx(this.poly.fP[o]),P=x.gry(this.poly.fP[o+1]),m=x.grz(this.poly.fP[o+2]);return{x1:d-this.scale0,x2:d+this.scale0,y1:P-this.scale0,y2:P+this.scale0,z1:m-this.scale0,z2:m+this.scale0,color:this.tip_color,lines:[this.tip_name,"pnt: "+o/3,"x: "+x.axisAsText("x",this.poly.fP[o]),"y: "+x.axisAsText("y",this.poly.fP[o+1]),"z: "+x.axisAsText("z",this.poly.fP[o+2])]}},e.render3D(100),this))}function O(){let i=this.getObject(),e=p(this,i);if(!(e&&"object"==typeof e&&e.grx&&e.gry&&e.grz))return e;let l=3*i.fN,n=i.fP,a=[];for(let s=3;s<l;s+=3)a.push(e.grx(n[s-3]),e.gry(n[s-2]),e.grz(n[s-1]),e.grx(n[s]),e.gry(n[s+1]),e.grz(n[s+2]));let r=(0,c.Qy)(a,(0,c.rq)(this,i));return e.toplevel.add(r),!0}}}]);
//# sourceMappingURL=680.564edf8a512a4646.js.map