"use strict";(self.webpackChunkphoenix_app=self.webpackChunkphoenix_app||[]).push([[562],{4562:(M,C,P)=>{P.r(C),P.d(C,{TRatioPlotPainter:()=>p});var T=P(1773),D=P(2454),E=P(1518),X=P(6898);class p extends D.tK{setGridsRange(a,_){var e,l,i;let h=this.getObject();if(a===_){let t=null==(i=null==(l=null==(e=this.getPadPainter())?void 0:e.findPainterFor(h.fLowerPad,"lower_pad","TPad"))?void 0:l.getFramePainter())?void 0:i.x_handle;if(!t)return;a=t.full_min,_=t.full_max}h.fGridlines.forEach(t=>{t.fX1=a,t.fX2=_})}redraw(){let a=this.getObject(),_=this.getPadPainter(),h=_.findPainterFor(a.fTopPad,"top_pad","TPad");h&&h.disablePadDrawing();let e=_.findPainterFor(a.fUpperPad,"upper_pad","TPad"),l=null==e?void 0:e.getMainPainter(),i=null==e?void 0:e.getFramePainter(),t=_.findPainterFor(a.fLowerPad,"lower_pad","TPad"),z=null==t?void 0:t.getMainPainter(),s=null==t?void 0:t.getFramePainter(),f=20,m=Promise.resolve(!0);if(e&&l&&i&&s&&!e._ratio_configured){e._ratio_configured=!0,l.options.Axis=0,f=l.getHisto().fYaxis.fLabelSize,f<1&&(f=Math.round(f*Math.min(e.getPadWidth(),e.getPadHeight())));let n=l.getHisto();n.fXaxis.fLabelSize=0,n.fXaxis.fTitle="",n.fYaxis.fLabelSize=f,n.fYaxis.fTitleSize=f,e.getRootPad().fTicky=1,m=e.redrawPad().then(()=>(i.o_zoom=i.zoom,i._ratio_low_fp=s,i._ratio_painter=this,i.zoom=function(u,g,o,d,r,c){return this._ratio_painter.setGridsRange(u,g),this._ratio_low_fp.o_zoom(u,g),this.o_zoom(u,g,o,d,r,c)},i.o_sizeChanged=i.sizeChanged,i.sizeChanged=function(){this.o_sizeChanged(),this._ratio_low_fp.fX1NDC=this.fX1NDC,this._ratio_low_fp.fX2NDC=this.fX2NDC,this._ratio_low_fp.o_sizeChanged()},!0))}return m.then(()=>{if(!t||!z||!s||!i||t._ratio_configured)return this;t._ratio_configured=!0,z.options.Axis=0;let n=z.getHisto();n.fXaxis.fTitle="x",n.fXaxis.fLabelSize=f,n.fXaxis.fTitleSize=f,n.fYaxis.fLabelSize=f,n.fYaxis.fTitleSize=f,t.getRootPad().fTicky=1,t.forEachPainterInPad(o=>{"function"==typeof(null==o?void 0:o.testEditable)&&o.testEditable(!1)});let g,u=[];return a.fGridlinePositions.length>0&&a.fGridlines.length<a.fGridlinePositions.length&&a.fGridlinePositions.forEach(o=>{let d=!1;if(a.fGridlines.forEach(r=>{r.fY1==r.fY2&&Math.abs(r.fY1-o)<1e-6&&(d=!0)}),!d){let r=(0,T.create)("TLine");r.fX1=i.scale_xmin,r.fX2=i.scale_xmax,r.fY1=r.fY2=o,r.fLineStyle=2,a.fGridlines.push(r),void 0===g&&(g=this.selectCurrentPad(a.fLowerPad.fName)),u.push((0,X.drawTLine)(this.getDom(),r))}}),Promise.all(u).then(()=>s.zoom(i.scale_xmin,i.scale_xmax)).then(()=>(s.o_zoom=s.zoom,s._ratio_up_fp=i,s._ratio_painter=this,s.zoom=function(o,d,r,c,L,w){return this._ratio_painter.setGridsRange(o,d),this._ratio_up_fp.o_zoom(o,d),this.o_zoom(o,d,r,c,L,w)},s.o_sizeChanged=s.sizeChanged,s.sizeChanged=function(){this.o_sizeChanged(),this._ratio_up_fp.fX1NDC=this.fX1NDC,this._ratio_up_fp.fX2NDC=this.fX2NDC,this._ratio_up_fp.o_sizeChanged()},this))})}static draw(a,_,h){let e=new p(a,_,h);return(0,E.ensureTCanvas)(e,!1).then(()=>e.redraw())}}}}]);
//# sourceMappingURL=562.0ce05c917df87b14.js.map