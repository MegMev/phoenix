"use strict";(self.webpackChunkphoenix_app=self.webpackChunkphoenix_app||[]).push([[897],{5897:(L,G,y)=>{y.r(G),y.d(G,{TMultiGraphPainter:()=>p});var d=y(1773),O=y(5611),D=y(2454),w=y(9608),Y=y(3879);class g extends D.tK{constructor(t,a){super(t,a),this.firstpainter=null,this.autorange=!1,this.painters=[]}cleanup(){this.painters=[],super.cleanup()}updateObject(t){var m,x;if(!this.matchObjectType(t))return!1;let a=this.getObject(),e=t.fGraphs,n=this.getPadPainter();a.fTitle=t.fTitle;let f=!1;if(this.firstpainter){let r=t.fHistogram;this.autorange&&!r&&(r=this.scanGraphsRange(e)),this.firstpainter.updateObject(r)&&(f=!0)}for(let r=0;r<e.arr.length;++r)r<this.painters.length&&this.painters[r].updateObject(e.arr[r])&&(f=!0);return null==(x=null==(m=t.fFunctions)?void 0:m.arr)||x.forEach(r=>{var h;(null==r?void 0:r._typename)&&(null==r?void 0:r.fName)&&(null==(h=null==n?void 0:n.findPainterFor(null,r.fName,r._typename))||h.updateObject(r))}),f}scanGraphsRange(t,a,e){let f,m,x,r,n=this.getObject(),h=0,o=0,T=!1,u=!1,X=!1,M="",i={xmin:0,xmax:0,ymin:0,ymax:0,first:!0};if(e&&(T=e.fLogx,u=e.fLogy,i.xmin=e.fUxmin,i.xmax=e.fUxmax,i.ymin=e.fUymin,i.ymax=e.fUymax,i.first=!1),this._3d&&a&&!a.fXaxis.fLabels&&(a=null),a){if(m=a.fYaxis.fXmin,f=a.fYaxis.fXmax,e){const s=l=>e.fLogx&&l<50?Math.exp(2.302585092994*l):l;h=s(i.xmin),o=s(i.xmax)}}else this.autorange=!0,t.arr.forEach(s=>{if(0!=s.fNpoints){i.first&&(i.xmin=i.xmax=s.fX[0],i.ymin=i.ymax=s.fY[0],i.first=!1);for(let l=0;l<s.fNpoints;++l)i.xmin=Math.min(i.xmin,s.fX[l]),i.xmax=Math.max(i.xmax,s.fX[l]),i.ymin=Math.min(i.ymin,s.fY[l]),i.ymax=Math.max(i.ymax,s.fY[l])}}),t.arr[0]&&t.arr[0].fHistogram&&t.arr[0].fHistogram.fXaxis.fTimeDisplay&&(X=!0,M=t.arr[0].fHistogram.fXaxis.fTimeFormat),i.xmin==i.xmax&&(i.xmax+=1),i.ymin==i.ymax&&(i.ymax+=1),x=.05*(i.xmax-i.xmin),r=.05*(i.ymax-i.ymin),h=i.xmin-x,o=i.xmax+x,u?(i.ymin<=0&&(i.ymin=.001*i.ymax),m=i.ymin/(1+.5*Math.log10(i.ymax/i.ymin)),f=i.ymax*(1+.2*Math.log10(i.ymax/i.ymin))):(m=i.ymin-r,f=i.ymax+r),m<0&&i.ymin>=0&&(m=0),f>0&&i.ymax<=0&&(f=0);if(h<0&&i.xmin>=0&&(h=T?.9*i.xmin:0),o>0&&i.xmax<=0&&(o=T?1.1*i.xmax:0),-1111!=n.fMinimum&&(i.ymin=m=n.fMinimum),-1111!=n.fMaximum&&(i.ymax=f=n.fMaximum),m<0&&i.ymin>=0&&u&&(m=.9*i.ymin),f>0&&i.ymax<=0&&u&&(f=1.1*i.ymax),m<=0&&u&&(m=.001*f),!u&&m>0&&m<.05*f&&(m=0),h<=0&&T&&(h=o>1e3?1:.001*o),!a){let s,l;if(this._3d){s=(a=(0,d.create)("TH2I")).fXaxis,s.fXmin=0,s.fXmax=t.arr.length,s.fNbins=t.arr.length,s.fLabels=(0,d.create)("THashList");for(let c=0;c<t.arr.length;c++){let P=(0,d.create)("TObjString");P.fString=t.arr[c].fTitle||`gr${c}`,P.fUniqueID=t.arr.length-c,s.fLabels.Add(P,"")}s=a.fYaxis,l=a.fZaxis}else s=(a=(0,d.create)("TH1I")).fXaxis,l=a.fYaxis;if(a.fTitle=n.fTitle,a.fTitle.indexOf(";")>=0){let c=a.fTitle.split(";");a.fTitle=c[0],c[1]&&(s.fTitle=c[1]),c[2]&&(l.fTitle=c[2])}s.fXmin=h,s.fXmax=o,s.fTimeDisplay=X,X&&(s.fTimeFormat=M)}return this._3d?(a.fMinimum=m,a.fMaximum=f):(a.fYaxis.fXmin=m,a.fYaxis.fXmax=f),a}drawAxisHist(t,a){return w.f.draw(this.getDom(),t,"AXIS"+a)}drawNextFunction(t){let a=this.getObject();return!a.fFunctions||t>=a.fFunctions.arr.length?Promise.resolve(this):this.getPadPainter().drawObject(this.getDom(),a.fFunctions.arr[t],a.fFunctions.opt[t]).then(()=>this.drawNextFunction(t+1))}drawGraph(t,a){return Y.TGraphPainter.draw(this.getDom(),t,a)}drawNextGraph(t,a){let e=this.getObject().fGraphs;if(t>=e.arr.length)return this._pfc=this._plc=this._pmc=!1,this.drawNextFunction(0);if(this._pfc||this._plc||this._pmc){let f=this.getMainPainter();if("function"==typeof(null==f?void 0:f.createAutoColor)){let m=f.createAutoColor(e.arr.length);this._pfc&&(e.arr[t].fFillColor=m),this._plc&&(e.arr[t].fLineColor=m),this._pmc&&(e.arr[t].fMarkerColor=m)}}return this.drawGraph(e.arr[t],e.opt[t]||a||"",e.arr.length-t).then(f=>(f&&this.painters.push(f),this.drawNextGraph(t+1,a)))}static _drawMG(t,a){let e=new O.pc(a);t._3d=e.check("3D"),t._pfc=e.check("PFC"),t._plc=e.check("PLC"),t._pmc=e.check("PMC");let n="";["USE_PAD_TITLE","LOGXY","LOGX","LOGY","LOGZ","GRIDXY","GRIDX","GRIDY","TICKXY","TICKX","TICKY","FB"].forEach(x=>{e.check(x)&&(n+=";"+x)});let m=Promise.resolve(!0);if(e.check("A")||!t.getMainPainter()){let x=t.getObject(),r=t.getPadPainter(),h=t.scanGraphsRange(x.fGraphs,x.fHistogram,null==r?void 0:r.getRootPad(!0));m=t.drawAxisHist(h,n).then(o=>{t.firstpainter=o,o.$secondary=!0})}return m.then(()=>(t.addToPadPrimitives(),t.drawNextGraph(0,e.remain())))}static draw(t,a,e){return g._drawMG(new g(t,a),e)}}var F=y(5759),H=y(3767);class p extends g{drawAxisHist(t,a){return this._3d?F.TH2Painter.draw(this.getDom(),t,"AXIS3D"+a):w.f.draw(this.getDom(),t,"AXIS"+a)}drawGraph(t,a,e){return this._3d&&(a+="pos3d_"+e),H.o.draw(this.getDom(),t,a)}static draw(t,a,e){return p._drawMG(new p(t,a),e)}}}}]);
//# sourceMappingURL=897.b6b64c0933ea6f8a.js.map